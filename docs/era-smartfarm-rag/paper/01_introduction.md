# 1. 서론 (Introduction)

## 1.1 연구 배경: 스마트농업의 확산과 데이터 기반 운영의 필요성

스마트농업은 IoT 센서, 데이터 분석, 자동제어 등 정보통신기술(ICT)을 농업 생산 과정에 적용하여 생산성과 품질 안정화를 달성하려는 접근이다. 특히 온실·식물공장과 같은 시설재배 환경에서는 온도, 습도, CO₂, 양액 등 핵심 환경 요인을 실시간으로 모니터링하고 자동 제어함으로써 재배 환경의 변동성을 줄이고 안정적인 생산을 지원할 수 있다. 이러한 흐름은 기후변화로 인한 생산 불확실성 확대, 농촌 고령화로 인한 노동력 부족 등 구조적 문제에 대응하기 위한 현실적인 대안으로 부상하고 있다.

스마트농업이 보급될수록 농장 운영은 데이터 중심으로 전환되지만, 동시에 현장 데이터와 상황이 복합적으로 얽히면서 "데이터 해석 → 원인 진단 → 실행 가능한 조치"로 이어지는 의사결정의 연결이 새로운 병목으로 드러난다. 단순히 데이터가 존재하는 것만으로는 현장에서 즉각적인 판단과 행동으로 이어지기 어렵고, 이를 매개할 수 있는 지능형 지원이 필요하다.

## 1.2 스마트농업 현장의 당면 과제

스마트농업 현장에서는 세 가지 핵심 과제가 존재한다.

첫째, **정형 데이터 해석의 난점**이다. 시설 내 센서로부터 수집되는 방대한 수치(온도, 습도, CO₂ 등)는 농가가 현장에서 즉시 의미를 해석하기 어렵고, 수치의 변화가 실제 재배 의사결정(원인–대응–우선순위)까지 자연스럽게 연결되지 않는 문제가 있다.

둘째, **비정형 데이터 활용의 단절**이다. 작물의 생육 이상이나 병해 징후는 잎·줄기 상태 등 이미지 형태로 먼저 나타나는 경우가 많지만, 이러한 비정형 정보는 정형 데이터와 통합되어 재사용 가능한 지식으로 축적되기 어렵다. 또한 농가의 경험과 노하우가 작업일지·메모로 축적되더라도 비정형·비표준 형태로 남아 검색 및 재활용이 제한된다.

셋째, **실시간 전문가 자문 부족**이다. 단순 알림 기반 시스템은 근본 원인 규명과 해결책 도출에 한계가 있으며, 농촌 지역 특성상 전문가의 신속한 현장 자문이 제한적이어서 의사결정 공백이 발생한다.

## 1.3 LLM 기반 현장 지원의 가능성과 제약

대규모 언어 모델(LLM)은 방대한 텍스트 데이터로 학습되어 자연어 맥락을 이해하고 질문에 대한 응답을 생성할 수 있다. 스마트농업 맥락에서 LLM은 다음과 같은 장점을 제공할 수 있다.

**대화형 현장 인터페이스**: 농업인의 자연어 질문을 그대로 수용하고, 필요한 경우 추가 질문을 통해 상황 정보를 보완하여 보다 정교한 진단을 지원할 수 있다. 또한 답변을 "원인 후보 → 확인 질문 → 조치 우선순위"와 같이 실행 가능한 형태로 구조화하여 현장 적용성을 높일 수 있다.

**비정형 정보의 지식화**: 작업일지·매뉴얼·메모에서 핵심을 요약·추출·태깅하여 재사용 가능한 지식으로 전환하고, 이미지 기반 관찰 정보 역시 캡션/태그 등 텍스트로 구조화하여 컨텍스트에 포함하거나 지식베이스로 축적할 수 있다.

그러나 고성능 LLM은 일반적으로 높은 연산 자원과 메모리를 요구하며, 대부분 클라우드 기반으로 운영된다. 이때 (1) 재배 기록 및 작업 노하우 등 민감 데이터의 외부 전송에 따른 보안·프라이버시 부담, (2) 네트워크 환경에 따른 지연·접속 문제, (3) 서비스 제공자 및 호스팅 환경에 대한 의존성 증가 등 현장 적용의 제약이 발생한다. 따라서 농업 현장에서 안정적으로 활용하기 위해서는 클라우드 의존을 줄이고 엣지(온디바이스)에서 실행 가능한 LLM 기반 시스템이 요구된다.

### (신규) 온프레미스 민감 지식 경계: Ingress 허용, Private Egress 0

특히 스마트농업 현장에서는 센서 원시값/요약, 작업일지, 개인 메모, 내부 매뉴얼 등 **운영·개인 정보가 결합된 민감 지식**이 지속적으로 발생한다. 이 데이터는 외부 전송 자체가 규정·보안상 어려운 경우가 많아, “질의 시점”뿐 아니라 “지식베이스 업데이트(지식 축적) 시점”에서도 온프레미스 내부에서 처리되어야 한다. 반면 공공 데이터/외부 문서 기반의 일반 지식은 현장으로 **유입(Ingress)** 시킬 수 있다. 따라서 본 연구는 “외부 지식 유입은 허용하되, 온프레미스 내부 지식의 외부 유출(Egress)은 0”이라는 운영 요구를 아키텍처 수준에서 고정하는 것을 전제로 한다.

## 1.4 온디바이스(엣지) LLM을 위한 경량화 필요성

온디바이스 환경에서의 LLM 운용을 위해서는 메모리 사용량과 지연 시간을 줄이면서 성능 저하를 최소화하는 경량화가 핵심 과제다. 대표적으로 양자화(정밀도 축소를 통한 용량·연산 절감), 프루닝(덜 중요한 연산 요소 제거), 지식 증류(대형 모델의 지식을 소형 모델로 이전) 등이 활용된다. 하지만 경량화 과정에서 모델의 지식 저장량과 추론 능력이 감소할 수 있으며, 특히 복합 상황에서 그럴듯하지만 잘못된 정보를 생성하는 환각(hallucination) 위험이 커질 수 있다. 농업 현장에서는 답변의 정확도와 근거 기반 신뢰성이 생산성과 직결되므로, 경량 모델의 한계를 보완하는 설계가 필요하다.

## 1.5 경량 LLM의 지식 한계 보완: RAG 중심 접근

경량 LLM의 지식 및 신뢰성 한계를 보완하기 위한 대표 전략으로는 프롬프트 엔지니어링, 검색 증강 생성(RAG), 추가학습(Fine-tuning), 경량 추가학습(PEFT/LoRA) 등이 있다. 이 중 Fine-tuning/PEFT는 도메인 적응에 유리하지만 학습·배포·업데이트 부담이 수반되며, 농업 지식처럼 변동이 잦은 정보를 신속히 반영하기 어렵다는 문제가 있다. 반면 RAG는 모델을 재학습하지 않고도 문서 업데이트만으로 최신 정보를 반영할 수 있고, 답변과 함께 근거를 제시하여 현장 신뢰성 확보에 유리하다. 따라서 본 연구는 온디바이스 제약과 최신성 요구를 동시에 고려하여 RAG를 중심 전략으로 채택한다.

## 1.6 연구 목표 및 검증 도메인

본 연구는 다음의 핵심 질문에 답하고자 한다.

> "온디바이스(엣지) 제약에서도 근거 기반 답변의 신뢰도와 일관성을 우선적으로 확보하면서, 지연·메모리 부담을 운영 가능한 수준으로 관리할 수 있는가?"

이를 위해 본 연구는 다음 네 가지 목표를 설정한다:
1. 현장 디바이스에서 동작 가능한 경량 LLM 추론 환경 구축
2. 매뉴얼·가이드·작업 기록·센서 및 관찰 요약을 참조 지식으로 정리하여 근거 기반 응답 지원
3. 질의 유형에 따라 검색 및 컨텍스트 길이를 조절해 품질과 비용(자원)의 균형 달성
4. 정확도, 근거 적합도, 환각 감소, 반복 실행 안정성(run-to-run variance)을 1차 지표로, 응답 시간/TTFT와 메모리 사용량을 운영 SLA 제약 지표로 분리 평가

이러한 목표를 달성하기 위해 본 연구는 **세 가지 학술적 기여**를 제시한다:

- **C1 (Data-driven Adaptive Tuning for Zero-Latency Fusion)**: 무거운 딥러닝 리랭커(Cross-encoder 등) 사용 시 여러 모달리티 융합 과정에서 발생하는 그래프 위상(Topology) 구조 훼손과 엣지 디바이스의 치명적 추론 지연(Latency) 문제를 해결하기 위해, **데이터 기반 동적 가중치 튜닝(DAT: Data-driven Adaptive Tuning)** 알고리즘을 제안한다. 사전에 최적화된 이산적(discrete) 가중치를 런타임 질의 특성에 따라 0-비용(Zero-cost) 매핑하여 3채널(Dense, Sparse, Graph)의 고유 순위 구조를 '끌어내림(Pull-down)' 현상 없이 완벽하게 보존하는 Query-Adaptive Weighted RRF를 구현하였다.
- **C2 (Sovereign Architecture with Composite Key Isolation)**: 글로벌 공개 지식(Public)과 농장 고유의 사적 지식(Private)이 혼재될 때 발생하는 민감 데이터 유출 및 오염 문제를 원천 차단하기 위해, **복합키(Composite Key, `canonical_id + tier + farm_id`) 기반의 소버린 아키텍처(Sovereign Architecture)**를 제안한다. 이를 통해 물리적으로 단일화된(Unified) Qdrant 및 FalkorDB 검색 엔진 위에서도 논리적으로 100% 격리된 로컬 프라이빗 지식(Egress 0) 저장소를 구현하였으며, 엣지 LLM을 이용한 안전하고 효율적인 온프레미스 증분 업데이트 생태계를 구축하였다.
- **C3 (End-to-End Edge-Deployable SmartFarm RAG System)**: MinerU 기반 멀티모달 파싱, 비전 LLM 기반 지식 추출, FalkorDB+Qdrant 영속 저장, Qwen3-4B Q4 엣지 추론, RAGAS+IR 메트릭 2-Track 평가를 하나의 재현 가능한 파이프라인으로 통합하여 8GB RAM 엣지 디바이스에서 오프라인 동작이 가능한 농업 QA 시스템을 구현한다.

현실적인 농업 시나리오에서의 검증을 위해 본 연구는 **와사비 재배 환경**을 실험 도메인으로 설정한다. 와사비는 환경 요인과 관리 요인이 복합적으로 작동하여 근거 기반 진단과 조치 제안의 필요성이 크고, 재배 정보의 표준화 수준이 낮아 지식 누락 및 환각 문제를 확인하기에 적합하다. 또한 센서 기반 정형 데이터와 관찰·작업기록 기반 비정형 데이터를 함께 참조해야 하는 질의가 빈번하다는 점에서, 본 연구가 목표로 하는 RAG 기반 현장 지원의 효과를 평가하기에 적절하다.

## 1.7 논문 구성

본 논문의 이후 구성은 다음과 같다. 2장에서는 RAG, 그래프 기반 검색, 농업 지식 시스템, 엣지 배포, 프라이버시 보존 RAG 등 관련 연구를 고찰하고 연구 공백을 식별한다. 3장에서는 제안 시스템의 전체 아키텍처(오프라인 인제스트, 온라인 검색, 이중 계층 지식 관리)를 기술한다. 4장에서는 구현 세부사항을, 5장에서는 실험 설정 및 결과 분석을 다루며, 6장에서 결론과 향후 과제를 제시한다.
